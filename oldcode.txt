<script>
      function getDemons() {
        var fr = new FileReader();
        var result = [];

        fr.onload = function() {
          var split = fr.result.split(" ");
          for (var spl in split) {
            result.append(spl);
          }
        }

        fr.readAsText("demonwords.txt");
        return result;
      }

      function onSubmit () {
        console.log(document.getElementById('docpicker').value);
        /*fetch("/wordextract", {
          method: "POST",
          body: JSON.stringify({
            doc: document.getElementById('output')
          }),
          headers: {"Content-Type": "application/json"}
        })
        .then(req => req.json())
        .then(res => {
          console.log(res.text);
        }).catch(e => alert(e));*/

        var fr = new FileReader();
        var demonlist = getDemons();

        fr.onload = function(){
          var result = fr.result.split(" ");
          var contains = [];

          for (var res in result) {
            if (demonList.contains(res)) {
              contains.append(res);
            }
          }

          if (contains.length == 0) {
            document.getElementById('output').innerHTML = "No demon words included!";
          } else {
            document.getElementById('output').innerHTML = "Includes the following demon words: " + contains;
          }
        }
        
        fr.readAsText(this.files[0]);
      }

      document.getElementById("form").addEventListener('submit', function(event) { event.preventDefault(); onSubmit(); });
    </script>